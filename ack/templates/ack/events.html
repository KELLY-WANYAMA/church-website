{% extends 'ack/base.html' %} 

{% load static %}

{% block title %}Church events - ACK ST. JUDE'S HURUMA{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/events.css' %}">
<style>
.hero {
    background: linear-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3)), url('{% static "image/church-hero.jpg" %}');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    color: white;
    text-align: center;
    padding: 120px 20px;
    margin-top: 60px;
}
</style>
{% endblock %}


{% block content %}
    <main>
        <section class="events-page">
            <div class="container">
                <!-- Page Header -->
                <div class="page-header">
                    <h1>
                        <i class="fas fa-calendar-alt"></i> Church Events & Calendar
                    </h1>
                    <p class="subtitle">
                        Explore our complete church calendar featuring upcoming revivals, fellowships, weddings, and prayer meetings. 
                        Join us as we gather to worship, fellowship, and grow together in Christ.
                    </p>
                    
                    <!-- Events Summary -->
                    <div class="events-summary">
                        <div class="summary-item">
                            <span class="summary-count">{{ upcoming_events|length }}</span>
                            <span class="summary-label">Upcoming Events</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-count">{{ past_events|length }}</span>
                            <span class="summary-label">Past Events</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-count">{{ all_events|length }}</span>
                            <span class="summary-label">Total Events</span>
                        </div>
                    </div>
                </div>

                <!-- Events Filter -->
                <div class="events-filter">
                    <button class="filter-btn {% if current_filter == 'all' %}active{% endif %}" 
                            data-filter="all">All Events</button>
                    <button class="filter-btn {% if current_filter == 'REVIVAL' %}active{% endif %}" 
                            data-filter="REVIVAL">
                        <i class="fas fa-church"></i> Revivals
                    </button>
                    <button class="filter-btn {% if current_filter == 'FELLOWSHIP' %}active{% endif %}" 
                            data-filter="FELLOWSHIP">
                        <i class="fas fa-handshake"></i> Fellowships
                    </button>
                    <button class="filter-btn {% if current_filter == 'WEDDING' %}active{% endif %}" 
                            data-filter="WEDDING">
                        <i class="fas fa-ring"></i> Weddings
                    </button>
                    <button class="filter-btn {% if current_filter == 'PRAYER' %}active{% endif %}" 
                            data-filter="PRAYER">
                        <i class="fas fa-pray"></i> Prayer
                    </button>
                </div>

                <!-- Filter Status Message -->
                {% if current_filter != 'all' %}
                <div class="filter-status">
                    <p>
                        <i class="fas fa-filter"></i>
                        Showing {{ all_events|length }} {{ current_filter|lower }} event{{ all_events|length|pluralize }}
                        <a href="{% url 'events' %}" class="clear-filter">Show all events</a>
                    </p>
                </div>
                {% endif %}

                <!-- Upcoming Events Section -->
                {% if upcoming_events %}
                <section class="events-section">
                    <h2 class="section-title">
                        <i class="fas fa-arrow-up"></i> Upcoming Events
                        <span class="event-count">{{ upcoming_events|length }}</span>
                    </h2>
                    <div class="events-grid">
                        {% for event in upcoming_events %}
                        <div class="event-card {{ event.event_type|lower }}">
                            <div class="event-badge status-upcoming">
                                {{ event.get_event_type_display }}
                            </div>
                            
                            <!-- Event Image -->
                            {% if event.image %}
                            <div class="event-image-container">
                                <img src="{{ event.image.url }}" alt="{{ event.title }}" class="event-image">
                            </div>
                            {% else %}
                            <div class="event-image-container">
                                <div class="event-image-placeholder">
                                    <i class="fas fa-calendar-day"></i>
                                </div>
                            </div>
                            {% endif %}
                            
                            <div class="event-details">
                                <h3>{{ event.title }}</h3>
                                <div class="event-meta">
                                    <p><i class="fas fa-calendar-day"></i> {{ event.date|date:"F j, Y" }}</p>
                                    <p><i class="fas fa-clock"></i> {{ event.date|date:"g:i A" }}</p>
                                    <p><i class="fas fa-map-marker-alt"></i> {{ event.location }}</p>
                                </div>
                                <p class="event-description">
                                    {{ event.description }}
                                </p>
                                <div class="event-footer">
                                    <span class="event-type">{{ event.get_event_type_display }}</span>
                                    <span class="event-date-display">{{ event.date|date:"M d, Y" }}</span>
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </section>
                {% endif %}

                <!-- Past Events Section -->
                {% if past_events %}
                <section class="events-section past-events-section">
                    <h2 class="section-title">
                        <i class="fas fa-history"></i> Past Events
                        <span class="event-count">{{ past_events|length }}</span>
                    </h2>
                    <div class="events-grid">
                        {% for event in past_events %}
                        <div class="event-card past-event {{ event.event_type|lower }}">
                            <div class="event-badge status-past">
                                Past Event
                            </div>
                            
                            <!-- Event Image -->
                            {% if event.image %}
                            <div class="event-image-container">
                                <img src="{{ event.image.url }}" alt="{{ event.title }}" class="event-image">
                            </div>
                            {% else %}
                            <div class="event-image-container">
                                <div class="event-image-placeholder">
                                    <i class="fas fa-history"></i>
                                </div>
                            </div>
                            {% endif %}
                            
                            <div class="event-details">
                                <h3>{{ event.title }}</h3>
                                <div class="event-meta">
                                    <p><i class="fas fa-calendar-day"></i> {{ event.date|date:"F j, Y" }}</p>
                                    <p><i class="fas fa-clock"></i> {{ event.date|date:"g:i A" }}</p>
                                    <p><i class="fas fa-map-marker-alt"></i> {{ event.location }}</p>
                                </div>
                                <p class="event-description">
                                    {{ event.description }}
                                </p>
                                
                                <!-- Video Links Section -->
                                {% if event.youtube_url or event.tiktok_url %}
                                <div class="video-links">
                                    <h4><i class="fas fa-video"></i> Watch Event Highlights:</h4>
                                    <div class="video-buttons">
                                        {% if event.youtube_url %}
                                        <a href="{{ event.youtube_url }}" target="_blank" rel="noopener" class="video-btn youtube-btn">
                                            <i class="fab fa-youtube"></i>
                                            Watch on YouTube
                                        </a>
                                        {% endif %}
                                        {% if event.tiktok_url %}
                                        <a href="{{ event.tiktok_url }}" target="_blank" rel="noopener" class="video-btn tiktok-btn">
                                            <i class="fab fa-tiktok"></i>
                                            Watch on TikTok
                                        </a>
                                        {% endif %}
                                    </div>
                                </div>
                                {% else %}
                                <div class="no-videos">
                                    <p><i class="fas fa-video-slash"></i> No video highlights available</p>
                                </div>
                                {% endif %}
                                
                                <div class="event-footer">
                                    <span class="event-type">{{ event.get_event_type_display }}</span>
                                    <span class="event-date-display">{{ event.date|date:"M d, Y" }}</span>
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </section>
                {% endif %}

                <!-- No Events Message -->
                {% if not all_events %}
                <div class="no-events">
                    <i class="fas fa-calendar-times"></i>
                    <h3>No Events Scheduled</h3>
                    <p>Check back later for upcoming church events and activities!</p>
                </div>
                {% endif %}

            </div>
        </section>
    </main>
{% endblock content %}


{% block extra_js %}
<script src="{% static 'js/events.js' %}"></script>
{% endblock %}